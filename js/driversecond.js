const app=Vue.createApp({data(){return{date:"",format:"MM月 dd日 ｜HH ：mm",msg_start:"",msg_end:"",passenger_counter:1,pet_counter:1,car_menu:"轎車",car_menu_open:!1,passenger_menu_open:!1,passenger:"乘客",pet:"寵物",cars:[{id:"a",cars_type:"轎車",cars_text:"乘客＋毛孩最多3位"},{id:"b",cars_type:"休旅車",cars_text:"乘客＋毛孩最多4位"}]}},computed:{disabledDates(){var e=new Date,t=new Date(e);return t.setHours(e.getHours()+3),t},show_passenger_quantity(){return`${this.passenger_counter} 位乘客，${this.pet_counter} 位毛孩`}},methods:{change(){var e=this.msg_start,t=this.msg_end;this.msg_start=t,this.msg_end=e},car_click(e){this.car_menu=e.cars_type,this.passenger_counter=1,this.pet_counter=1,this.$refs.dirver_Subtotal_icon_control.classList.remove("limit"),this.$refs.pet_Subtotal_icon_control.classList.remove("limit")},PlusOne(e){let t=0;"轎車"===this.car_menu&&(t=3,this.passenger_counter+this.pet_counter<3&&this[e]++,this.passenger_counter+this.pet_counter>=t&&(this.$refs.dirver_Subtotal_icon_control.classList.add("limit"),this.$refs.pet_Subtotal_icon_control.classList.add("limit")),3<=this.passenger_counter+this.pet_counter)&&(this.$refs.dirver_Subtotal_icon_control.classList.add("limit"),this.$refs.pet_Subtotal_icon_control.classList.add("limit")),"休旅車"===this.car_menu&&(t=4,this.passenger_counter+this.pet_counter<4&&this[e]++,console.log(this.passenger_counter),console.log(this.pet_counter),this.passenger_counter+this.pet_counter==t)&&(this.$refs.dirver_Subtotal_icon_control.classList.add("limit"),this.$refs.pet_Subtotal_icon_control.classList.add("limit"))},MinusOne(e,t){t.target.classList.contains("limit")||(this[e]--,"轎車"===this.car_menu&&(car_class_minus=3,this.passenger_counter+this.pet_counter<=car_class_minus)&&(this.$refs.dirver_Subtotal_icon_control.classList.remove("limit"),this.$refs.pet_Subtotal_icon_control.classList.remove("limit")),"休旅車"===this.car_menu&&(car_class_minus=4,this.passenger_counter+this.pet_counter<=car_class_minus)&&(this.$refs.dirver_Subtotal_icon_control.classList.remove("limit"),this.$refs.pet_Subtotal_icon_control.classList.remove("limit")))}},mounted(){var e=new Date,e=(this.date=e,new URLSearchParams(window.location.search)),t=e.get("start_place"),s=e.get("end_place"),n=e.get("date-picker"),i=e.get("car-type"),r=e.get("passenger"),e=e.get("pet");t&&(this.msg_start=t),s&&(this.msg_end=s),n&&(this.format=n),i&&(this.car_menu=i),r&&(this.passenger_counter=r),e&&(this.pet_counter=e)}}),vm_2=(app.component("Datepicker",VueDatePicker),app.mount("#driver_app"));let addCart=document.querySelector(".addCart"),popup=document.querySelector(".ol-contentShop");addCart.addEventListener("click",function(){console.log(popup),popup.style.opacity="1",setTimeout(function(){popup.style.opacity="0"},3e3)});let map,directionsService,directionsRenderer;async function calculateDistance(){var e=document.getElementById("start_place_input").value,t=document.getElementById("end_place_input").value,s=new google.maps.Geocoder,e=await getCoordinates(s,e),s=await getCoordinates(s,t);e&&s?(t={origin:e,destination:s,travelMode:"DRIVING"},directionsService.route(t,(e,t)=>{"OK"===t?(directionsRenderer.setDirections(e),e.routes[0].legs[0].distance.text,e=e.routes[0].legs[0].duration.text,document.getElementById("durationDisplay").textContent=""+e):alert("Directions request failed due to "+t)})):alert("請輸入有效的出發地和目的地")}async function getCoordinates(e,t){return new Promise((s,n)=>{e.geocode({address:t},(e,t)=>{"OK"===t?s(e[0].geometry.location):n(null)})})}window.onload=async function(){await google.maps.importLibrary("places","geometry"),map=new google.maps.Map(document.getElementById("map"),{center:{lat:25.05214,lng:121.54325},zoom:15}),directionsService=new google.maps.DirectionsService,(directionsRenderer=new google.maps.DirectionsRenderer).setMap(map);var e=document.getElementById("driverbtn");console.log(e),e.addEventListener("click",calculateDistance),calculateDistance()},searchButton.addEventListener("click",calculateDistance),originInput.addEventListener("keyup",function(e){"Enter"===e.key&&calculateDistance()}),destinationInput.addEventListener("keyup",function(e){"Enter"===e.key&&calculateDistance()});